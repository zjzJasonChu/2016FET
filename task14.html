<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<title>IFE JavaScript Task 14</title>
</head>
<body>
	<h3>污染城市列表</h3>
	<ul id="aqi-list">
	</ul>

	<script type="text/javascript">
	/*
	遍历读取aqiData中各个城市的数据，
	将aqi大于60的城市显示在aqi-list列表中
	 */
	var aqiData=[
		['北京',90],
		['上海',50],
		['福州',10],
		['广州',50],
		['成都',90],
		['西安',100],
		['深圳',20],
		['南京',60],
		['杭州',80],
		['天津',70]
	];
	(function(){
		//根据aqi数值进行逆序排序
		function compare(array1,array2){
			return array2[1]-array1[1];
		}
		aqiData.sort(compare);
		
		//使用文档片段进行DOM更新，只需更新一次，提高性能
		var fragment=document.createDocumentFragment(),
			num=['一','二','三','四','五','六','七','八','九','十'],
			index=0;
		for(var i=0, len=aqiData.length; i<len; i++){
			if(aqiData[i][1]>60){
				var li=document.createElement('li');
				//使用innerHTML而非textNode，提高性能
				li.innerHTML='第'+num[index++]+'名：'+aqiData[i][0]+'，'+aqiData[i][1];
				fragment.appendChild(li);
			}
		}
		document.getElementById('aqi-list').appendChild(fragment);
	})();
	</script>
</body>
</html>